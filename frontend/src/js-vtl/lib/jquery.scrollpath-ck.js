/*
                =============================
                  jQuery Scroll Path Plugin
                            v1.1.1

                   Demo and Documentation:
                  http://joelb.me/scrollpath
                =============================

    A jQuery plugin for defining a custom path that the browser
    follows when scrolling. Comes with a custom scrollbar,
    which is styled in scrollpath.css.

    Author: Joel Besada (http://www.joelb.me)
    Date: 2012-02-01

    Copyright 2012, Joel Besada
    MIT Licensed (http://www.opensource.org/licenses/mit-license.php)
*/(function(e,t,n,r){function x(t,n){function w(e,t){a=e;l=t}function E(e,t){d=Math.min(e,d);v=Math.min(t,v);h=Math.max(e,h);p=Math.max(t,p)}var r=40,s=t,u=n,a=0,l=0,c=0,h=0,p=0,d=0,v=0,m=[{method:"moveTo",args:[0,0]}],g=[],y={},b={rotate:null,callback:null,name:null};this.rotate=function(t,n){var r=e.extend({},b,n),i=Math.abs(t-c),s=Math.round(i/u)*f,h=(t-c)/s,p=1;if(!o){(r.name||r.callback)&&this.moveTo(a,l,{callback:r.callback,name:r.name});return this}for(;p<=s;p++)g.push({x:a,y:l,rotate:c+h*p,callback:p===s?r.callback:null});r.name&&(y[r.name]=g.length-1);c=t%(Math.PI*2);return this};this.moveTo=function(t,n,r){var s=e.extend({},b,r),o=g.length?f:1;i=0;for(;i<o;i++)g.push({x:t,y:n,rotate:s.rotate!==null?s.rotate:c,callback:i===o-1?s.callback:null});s.name&&(y[s.name]=g.length-1);w(t,n);E(t,n);m.push({method:"moveTo",args:arguments});return this};this.lineTo=function(t,n,r){var i=e.extend({},b,r),u=t-a,h=n-l,p=W(u,h),d=Math.round(p/s)*f,v=u/d,S=h/d,x=i.rotate!==null&&o,T=x?(i.rotate-c)/d:0,N=1;for(;N<=d;N++)g.push({x:a+v*N,y:l+S*N,rotate:c+T*N,callback:N===d?i.callback:null});i.name&&(y[i.name]=g.length-1);c=x?i.rotate:c;w(t,n);E(t,n);m.push({method:"lineTo",args:arguments});return this};this.arc=function(t,n,r,i,u,h,p){var d=e.extend({},b,p),v=t+Math.cos(i)*r,S=n+Math.sin(i)*r,x=t+Math.cos(u)*r,T=n+Math.sin(u)*r,N=q(i,u,h),C=r*N,k=Math.round(C/s)*f,L=N/k*(h?-1:1),A=d.rotate!==null&&o,O=A?(d.rotate-c)/k:0,M=1;(a!==v||l!==S)&&this.lineTo(v,S);for(;M<=k;M++)g.push({x:t+r*Math.cos(i+L*M),y:n+r*Math.sin(i+L*M),rotate:c+O*M,callback:M===k?d.callback:null});d.name&&(y[d.name]=g.length-1);c=A?d.rotate:c;w(x,T);E(t+r,n+r);E(t-r,n-r);m.push({method:"arc",args:arguments});return this};this.getPath=function(){return g};this.getNameMap=function(){return y};this.getCanvasPath=function(){var e=0;for(;e<m.length;e++){m[e].args[0]-=this.getPathOffsetX();m[e].args[1]-=this.getPathOffsetY()}return m};this.getPathWidth=function(){return h-d+r};this.getPathHeight=function(){return p-v+r};this.getPathOffsetX=function(){return d-r/2};this.getPathOffsetY=function(){return v-r/2}}function T(){if(!E.scrollBar)return;y=e("<div>").addClass("sp-scroll-bar").on("mousedown",function(e){var t=Math.round((e.offsetY||e.clientY)/y.height()*(m.length-1));Math.abs(t-d)>l&&(t=d+5*f*(t>d?1:-1));_(t);e.preventDefault();return!1});b=e("<div>").addClass("sp-scroll-handle").on({click:function(e){e.preventDefault();return!1},mousedown:function(e){if(e.button!==0)return;h=!0;e.preventDefault();return!1}});e(n).on({mouseup:function(e){h=!1},mousemove:function(e){h&&A(e)}});e("body").prepend(y.append(b))}function N(){if(!E.drawPath||!u)return;var t,n={position:"absolute","z-index":9998,left:v.getPathOffsetX(),top:v.getPathOffsetY(),"pointer-events":"none"};j(n,"user-select","none");j(n,"user-drag","none");t=e("<canvas>").addClass("sp-canvas").css(n).prependTo(g);t[0].width=v.getPathWidth();t[0].height=v.getPathHeight();C(t[0].getContext("2d"),v.getCanvasPath())}function C(e,t){var n=0;e.shadowBlur=15;e.shadowColor="black";e.strokeStyle="white";e.lineJoin="round";e.lineCap="round";e.lineWidth=10;for(;n<t.length;n++)e[t[n].method].apply(e,t[n].args);e.stroke()}function k(n){var r=n.originalEvent.wheelDelta||-n.originalEvent.detail,i=r/Math.abs(r);n.preventDefault();e(t).scrollTop(0).scrollLeft(0);O(-i*f)}function L(e){if(/^text/.test(e.target.type))return;switch(e.keyCode){case 40:O(f);break;case 38:O(-f);break;case 34:O(l);break;case 33:O(-l);break;case 32:O(l*(e.shiftKey?-1:1));break;case 35:_(m.length-1);break;case 36:_(0)}}function A(e){var t,n=e.clientY-y.offset().top;t=R(Math.round(n/y.height()*(m.length-1)),0,m.length-1);_(U(t,f))}function O(e){_(P(d+e))}function M(t,n,r,i){if(t===0||p)return;if(!n||typeof n!="number"){typeof n=="function"&&n();return O(t)}p=!0;var s=n/1e3*a,o=d,u=0,f,l,c=setInterval(function(){f=Math.round((e.easing[r]||e.easing.swing)(++u/s,n/s*u,0,t,n));l=P(o+f);if(u===s){clearInterval(c);typeof r=="function"?r():i&&i();p=!1}_(l,!0)},n/s)}function _(e,t){if(p&&!t)return;var n;if(m[e]){n=m[e].callback;g.css(H(m[e]))}b&&b.css("top",e/(m.length-1)*(y.height()-b.height())+"px");n&&e!==d&&!p&&n();d=e}function D(e){return v.getNameMap()[e]}function P(e){if(E.wrapAround)if(p){while(e<0)e+=m.length;while(e>=m.length)e-=m.length}else{e<0&&(e=m.length-1);e>=m.length&&(e=0)}else e=R(e,0,m.length-1);return e}function H(n){var r=n.x-e(t).width()/2,i=n.y-e(t).height()/2,s={};if(z(n.rotate)===0){s.left=-r;s.top=-i;j(s,"transform-origin","");j(s,"transform","")}else{s.left=s.top="";j(s,"transform-origin",n.x+"px "+n.y+"px");j(s,"transform","translate("+ -r+"px, "+ -i+"px) rotate("+n.rotate+"rad)")}return s}function B(){var e=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,t=n.getElementsByTagName("script")[0];for(var r in t.style)if(e.test(r))return r.match(e)[0];return"WebkitOpacity"in t.style?"Webkit":"KhtmlOpacity"in t.style?"Khtml":""}function j(e,t,n){e[s+t]=e[t]=n}function F(){var e=n.createElement("dummy").style,t=["transform","WebkitTransform","MozTransform","OTransform","msTransform","KhtmlTransform"],i=0;for(;i<t.length;i++)if(e[t[i]]!==r)return!0;return!1}function I(){return!!n.createElement("canvas").getContext}function q(e,t,n){var r=z(e),i=z(t),s=Math.abs(r-i),o=Math.PI*2-s;return n&&r<i||!n&&r>i||r===i&&e!==t?o:s}function R(e,t,n){return e>n?n:e<t?t:e}function U(e,t){var n=e%t;return n>t/2?e+t-n:e-n}function z(e){while(e<0)e+=Math.PI*2;return e%(Math.PI*2)}function W(e,t){return Math.sqrt(e*e+t*t)}var s="-"+B().toLowerCase()+"-",o=F(),u=I(),a=60,f=50,l=f*5,c=!1,h=!1,p=!1,d,v,m,g,y,b,w={scrollSpeed:50,rotationSpeed:Math.PI/15},E={wrapAround:!1,drawPath:!1,scrollBar:!0},S={init:function(r){(this.length>1||c)&&e.error("jQuery.scrollPath can only initialized on *one* element *once*");e.extend(E,r);c=!0;g=this;m=v.getPath();N();T();_(0);g.css("position","relative");e(n).on({mousewheel:k,DOMMouseScroll:k,keydown:L,mousedown:function(e){if(e.button===1){e.preventDefault();return!1}}});e(t).on("resize",function(){_(d)});return this},getPath:function(t){e.extend(w,t);return v||(v=new x(w.scrollSpeed,w.rotationSpeed))},scrollTo:function(t,n,i,s){var o=D(t);o===r&&e.error("jQuery.scrollPath could not find scroll target with name '"+t+"'");var u=o-d;E.wrapAround&&Math.abs(u)>m.length/2&&(o>d?u=-d-m.length+o:u=m.length-d+o);M(u,n,i,s);return this}};e.fn.scrollPath=function(t){if(S[t])return S[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return S.init.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.scrollPath")}})(jQuery,window,document);