/*
 * Raphael SVG Import Classic 0.1.3 - Extension to Raphael JS
 * https://github.com/crccheck/raphael-svg-import-classic
 *
 * Raphael SVG Import Classic Copyright (c) 2012 Chris Chang
 * Original Raphael SVG Import Copyright (c) 2009 Wout Fierens
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 *
 *//* global Raphael */Raphael.fn.drawGrid=function(e,t,n,r,i,s,o){o=o||"#000";var u=["M",Math.round(e)+.5,Math.round(t)+.5,"L",Math.round(e+n)+.5,Math.round(t)+.5,Math.round(e+n)+.5,Math.round(t+r)+.5,Math.round(e)+.5,Math.round(t+r)+.5,Math.round(e)+.5,Math.round(t)+.5],a=r/s,f=n/i;for(var l=1;l<s;l++)u=u.concat(["M",Math.round(e)+.5,Math.round(t+l*a)+.5,"H",Math.round(e+n)+.5]);for(l=1;l<i;l++)u=u.concat(["M",Math.round(e+l*f)+.5,Math.round(t)+.5,"V",Math.round(t+r)+.5]);return this.path(u.join(",")).attr({stroke:o})};Raphael.fn.importSVG=function(e){var t=this.set(),n={},r=0,i=undefined,s={"text-anchor":"start"};this.stringtoXML=function(e){if(window.ActiveXObject){var t=new ActiveXObject("Microsoft.XMLDOM");t.async="false";t.loadXML(e)}else var n=new DOMParser,t=n.parseFromString(e,"text/xml");return t};this.parseElement=function(e){if(e.nodeType==3)return;var o={stroke:"transparent","stroke-width":0,fill:"#000"},u;if(e.attributes)for(u=e.attributes.length-1;u>=0;--u)e.attributes[u].name=="stroke-dasharray"?o["stroke-dasharray"]="- ":o[e.attributes[u].name]=e.attributes[u].value;var a,f,l=e.nodeName;switch(l){case"svg":case"g":r++;if(r==2){var c=e.getAttribute("id");c&&e.childNodes.length&&e.childNodes.item(1)!=null&&e.childNodes.item(1).setAttribute("id",c);var h=this.set();i=h}else i===undefined&&(i=this.set());for(u=0;u<e.childNodes.length;++u)i.push(this.parseElement(e.childNodes.item(u)));if(o.transform){var p=/translate\(([^,]+),([^,]+)\)/.exec(o.transform);p.length==3&&h.translate(p[1],p[2])}o.display==="none"&&h.hide();o.visibility==="hidden"&&h.hide();try{styles=this.styleToAttr(o.style);styles.visibility==="hidden"&&h.hide()}catch(d){}c&&e.childNodes.length&&(n[c]=h);r--;return;case"rect":if(o.rx&&o.ry){o.r=(+(o.rx||0)+ +(o.ry||0))/2;delete o.rx;delete o.ry}else{o.r=o.rx||o.ry||0;delete o.rx;delete o.ry};case"circle":case"ellipse":a=this[l]();break;case"path":a=this.path(o.d);delete o.d;break;case"polygon":a=this.polygon(o);break;case"polyline":a=this.polyline(o);break;case"line":a=this.line(o);break;case"image":a=this.image();break;case"text":for(var v in s)!o[v]&&s.hasOwnProperty(v)&&(o[v]=s[v]);a=this.text(o.x,o.y,e.text||e.textContent);break;default:var m=e.getElementsByTagName("svg");if(m.length){m[0].normalize();this.parseElement(m[0])}return}var g=o.transform;if(g){g=g.substring(7,g.length-1).split(" ").map(function(e){return parseFloat(e)});var y=a.matrix;y.add.apply(y,g);a.transform(y.toTransformString());delete o.transform}a.attr(o);styles=this.styleToAttr(o.style);a.attr(styles);var b=e.getAttribute("id");b&&(a.node.id=b);t.push(a);return a};typeof e=="string"&&(e=this.stringtoXML(e));this.parseElement(e);var o=!1,u;for(u in n){o=!0;break}o&&(t.groups=n);return t};Raphael.fn.line=function(e){var t=["M",e.x1,e.y1,"L",e.x2,e.y2,"Z"];delete e.x1;delete e.y1;delete e.x2;delete e.y2;return this.path(t)};Raphael.fn.styleToAttr=function(e){var t={};if(typeof e!="string")return;var n=e.split(";");for(var r=0;r<n.length;r++){var i=n[r].split(":");t[i[0]]=i[1]}return t};Raphael.fn.polygon=function(e){var t=e.points,n=["M"],r=t.split(" ");for(var i=0;i<r.length;i++){var s=r[i].split(",");for(var o=0;o<s.length;o++){var u=parseFloat(s[o]);isNaN(u)||n.push(u)}i===0&&n.push("L")}n.push("Z");delete e.points;return this.path(n)};Raphael.fn.polyline=function(e){var t=e.points,n=["M"],r=t.split(" ");for(var i=0;i<r.length;i++){var s=r[i].split(",");for(var o=0;o<s.length;o++){var u=parseFloat(s[o]);isNaN(u)||n.push(u)}i===0&&n.push("L")}delete e.points;return this.path(n)};