function initButtons(){function e(e){var t=$(this).attr("href");t=t.substr(1);CURRENT_SCENE=t;$("#scenes ul a").css("background","transparent");$(this).css("background","#FFE4D9");$currentscene.text(CURRENT_SCENE)}function t(){var e=$(this).attr("href");e=e.substr(1);console.log(e);spritify(e)}function n(){var e=$(this).attr("href");e=e.substr(1)}function r(){$workarea.css("cursor",CURSOR)}$b.run.click(function(){$workbench.tabs("select",2);Editor.run()});$b.clear.click(function(){$consoletext.html("")});$b.newent.click(function(){var e,t="";for(e in COMPS)t+="<option value='"+e+"'>"+e+"</option>";$necomps.html(t);$nedialog.dialog({modal:!0,buttons:{Cancel:function(){$(this).dialog("close")},Create:function(){var e=$instance.val().replace(/^[0-9]*/,"").replace(/[^A-Za-z0-9]/g,""),t=$necomps.val()||"",n;if(ENTS[e]||!e.length)$instance.val("");else{t=typeof t=="object"?t.join(", "):"";CENTS[e]=Crafty.e("_GUI").comps(t);ENTS[e]={comps:t};Editor.update();$instance.val("");$(this).dialog("close")}}}})});$b.newscene.click(function(){$nsdialog.dialog({modal:!0,buttons:{Cancel:function(){$(this).dialog("close")},Create:function(){var e=$scname.val();SCENES[e]={};Editor.update();$(this).dialog("close")}}})});$b.addasset.click(function(){$asdialog.dialog({modal:!0,buttons:{Cancel:function(){$(this).dialog("close")},Add:function(){var e=$asname.val();ASSETS[e]={type:Editor.media(e)};Editor.update();$(this).dialog("close")}}})});$b.load.click(function(){$loaddialog.dialog({modal:!0,buttons:{Cancel:function(){$(this).dialog("close")},Load:function(){var e=$groot.val(),t=$sloc.val();BASE=e;iframe(t,e,function(){this.Crafty.stop();Editor.extract(this.Crafty);Editor.update()});$(this).dialog("close")}}})});$("#scenes ul a").live("dblclick",e).contextMenu("sceneMenu",{open:e});$("#assets ul a.image").live("dblclick",t).contextMenu("imageMenu",{spritify:t});$("#assets ul a.sound").live("dblclick",n).contextMenu("soundMenu",{play:n});$("#entities ul a").live("dblclick",function(){var e=$(this).attr("href");e=e.substr(1);CURRENT_ENTITY=e}).contextMenu("entsMenu",{click:function(){var e=$(this).attr("href"),t=$workbench.tabs("option","selected");e=e.substr(1);CURRENT_ENTITY=e;$("#entities ul a").css("background","transparent");$(this).css("background","#FFE4D9")},properties:function(){$prdialog.dialog({modal:!0,maxHeight:600,width:400,buttons:{Done:function(){$(this).dialog("close")}}});var e=CENTS[CURRENT_ENTITY],t,n="";for(t in e){if(typeof e[t]=="function"||t==="length"||t.charAt(0)==="_"||/^[0-9]+/.test(t))continue;n+="<tr><th>"+t+":</th><td><input type='text' value='"+e[t]+"' name='"+t+"'/></tr>"}$prdialog.find("table").html(n);$prdialog.find("input").change(function(){var t=$(this).attr("name"),n=$(this).val();e[t]=guessType(n)})}});$b.pointer.mousedown(function(){CURSOR="default";r()});$b.text.mousedown(function(){CURSOR="text";r()});$b.spritebrush.mousedown(function(){CURSOR="url('assets/images/paintbrush.png'), auto";r()});$b.scroll.mousedown(function(){CURSOR="move";r()});$b.polygon.mousedown(function(){CURSOR="crosshair";r()})};