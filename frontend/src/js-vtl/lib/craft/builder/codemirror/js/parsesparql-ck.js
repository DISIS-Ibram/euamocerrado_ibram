var SparqlParser=Editor.Parser=function(){function e(e){return new RegExp("^(?:"+e.join("|")+")$","i")}function s(e){return function(t){var n=t&&t.charAt(0);if(/[\]\}]/.test(n))while(e&&e.type=="pattern")e=e.prev;var r=e&&n==matching[e.type];return e?e.type=="pattern"?e.col:e.align?e.col-(r?e.width:0):e.indent+(r?0:indentUnit):0}}function o(e){function u(e,t){n={prev:n,indent:r,col:o,type:e,width:t}}function a(){n=n.prev}var t=i(e),n=null,r=0,o=0,f={next:function(){var e=t.next(),i=e.style,f=e.content,l=e.value.length;if(f=="\n"){e.indentation=s(n);r=o=0;n&&n.align==null&&(n.align=!1)}else i=="whitespace"&&o==0?r=l:i!="sp-comment"&&n&&n.align==null&&(n.align=!0);f!="\n"&&(o+=l);if(/[\[\{\(]/.test(f))u(f,l);else if(/[\]\}\)]/.test(f)){while(n&&n.type=="pattern")a();n&&f==matching[n.type]&&a()}else f=="."&&n&&n.type=="pattern"?a():(i=="sp-word"||i=="sp-prefixed"||i=="sp-uri"||i=="sp-var"||i=="sp-literal")&&n&&/[\{\[]/.test(n.type)&&u("pattern",l);return e},copy:function(){var e=n,s=r,u=o,a=t.state;return function(l){t=i(l,a);n=e;r=s;o=u;return f}}};return f}var t=e(["str","lang","langmatches","datatype","bound","sameterm","isiri","isuri","isblank","isliteral","union","a"]),n=e(["base","prefix","select","distinct","reduced","construct","describe","ask","from","named","where","order","limit","offset","filter","optional","graph","by","asc","desc"]),r=/[*+\-<>=&|]/,i=function(){function e(e,s){var o=e.next();if(o=="$"||o=="?"){e.nextWhileMatches(/[\w\d]/);return"sp-var"}if(o=="<"&&!e.matches(/[\s\u00a0=]/)){e.nextWhileMatches(/[^\s\u00a0>]/);e.equals(">")&&e.next();return"sp-uri"}if(o=='"'||o=="'"){s(i(o));return null}if(/[{}\(\),\.;\[\]]/.test(o))return"sp-punc";if(o=="#"){while(!e.endOfLine())e.next();return"sp-comment"}if(r.test(o)){e.nextWhileMatches(r);return"sp-operator"}if(o==":"){e.nextWhileMatches(/[\w\d\._\-]/);return"sp-prefixed"}e.nextWhileMatches(/[_\w\d]/);if(e.equals(":")){e.next();e.nextWhileMatches(/[\w\d_\-]/);return"sp-prefixed"}var u=e.get(),a;t.test(u)?a="sp-operator":n.test(u)?a="sp-keyword":a="sp-word";return{style:a,content:u}}function i(t){return function(n,r){var i=!1;while(!n.endOfLine()){var s=n.next();if(s==t&&!i){r(e);break}i=!i&&s=="\\"}return"sp-literal"}}return function(t,n){return tokenizer(t,n||e)}}();return{make:o,electricChars:"}]"}}();