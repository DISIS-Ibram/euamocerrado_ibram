Crafty.extend({device:{_deviceOrientationCallback:!1,_deviceMotionCallback:!1,_normalizeDeviceOrientation:function(e){var t;window.DeviceOrientationEvent?t={tiltLR:e.gamma,tiltFB:e.beta,dir:e.alpha,motUD:null}:window.OrientationEvent&&(t={tiltLR:e.x*90,tiltFB:e.y*-90,dir:null,motUD:e.z});Crafty.device._deviceOrientationCallback(t)},_normalizeDeviceMotion:function(e){var t=e.accelerationIncludingGravity,n=t.z>0?1:-1,r={acceleration:t,rawAcceleration:"["+Math.round(t.x)+", "+Math.round(t.y)+", "+Math.round(t.z)+"]",facingUp:n,tiltLR:Math.round(t.x/9.81*-90),tiltFB:Math.round((t.y+9.81)/9.81*90*n)};Crafty.device._deviceMotionCallback(r)},deviceOrientation:function(e){this._deviceOrientationCallback=e;Crafty.support.deviceorientation&&(window.DeviceOrientationEvent?Crafty.addEvent(this,window,"deviceorientation",this._normalizeDeviceOrientation):window.OrientationEvent&&Crafty.addEvent(this,window,"MozOrientation",this._normalizeDeviceOrientation))},deviceMotion:function(e){this._deviceMotionCallback=e;Crafty.support.devicemotion&&window.DeviceMotionEvent&&Crafty.addEvent(this,window,"devicemotion",this._normalizeDeviceMotion)}}});