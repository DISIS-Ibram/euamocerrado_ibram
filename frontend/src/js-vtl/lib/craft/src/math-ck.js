/**@
* #Crafty.math
* @category 2D
* Static functions.
*/Crafty.math={abs:function(e){return e<0?-e:e},amountOf:function(e,t,n){return t<n?(e-t)/(n-t):(e-n)/(t-n)},clamp:function(e,t,n){return e>n?n:e<t?t:e},degToRad:function(e){return e*Math.PI/180},distance:function(e,t,n,r){var i=Crafty.math.squaredDistance(e,t,n,r);return Math.sqrt(parseFloat(i))},lerp:function(e,t,n){return e+(t-e)*n},negate:function(e){return Math.random()<e?-1:1},radToDeg:function(e){return e*180/Math.PI},randomElementOfArray:function(e){return e[Math.floor(e.length*Math.random())]},randomInt:function(e,t){return e+Math.floor((1+t-e)*Math.random())},randomNumber:function(e,t){return e+(t-e)*Math.random()},squaredDistance:function(e,t,n,r){return(e-n)*(e-n)+(t-r)*(t-r)},withinRange:function(e,t,n){return e>=t&&e<=n}};Crafty.math.Vector2D=function(){function e(t,n){if(t instanceof e){this.x=t.x;this.y=t.y}else if(arguments.length===2){this.x=t;this.y=n}else if(arguments.length>0)throw"Unexpected number of arguments for Vector2D()"}e.prototype.x=0;e.prototype.y=0;e.prototype.add=function(e){this.x+=e.x;this.y+=e.y;return this};e.prototype.angleBetween=function(e){return Math.atan2(this.x*e.y-this.y*e.x,this.x*e.x+this.y*e.y)};e.prototype.angleTo=function(e){return Math.atan2(e.y-this.y,e.x-this.x)};e.prototype.clone=function(){return new e(this)};e.prototype.distance=function(e){return Math.sqrt((e.x-this.x)*(e.x-this.x)+(e.y-this.y)*(e.y-this.y))};e.prototype.distanceSq=function(e){return(e.x-this.x)*(e.x-this.x)+(e.y-this.y)*(e.y-this.y)};e.prototype.divide=function(e){this.x/=e.x;this.y/=e.y;return this};e.prototype.dotProduct=function(e){return this.x*e.x+this.y*e.y};e.prototype.equals=function(t){return t instanceof e&&this.x==t.x&&this.y==t.y};e.prototype.getNormal=function(t){return t===undefined?new e(-this.y,this.x):(new e(t.y-this.y,this.x-t.x)).normalize()};e.prototype.isZero=function(){return this.x===0&&this.y===0};e.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};e.prototype.magnitudeSq=function(){return this.x*this.x+this.y*this.y};e.prototype.multiply=function(e){this.x*=e.x;this.y*=e.y;return this};e.prototype.negate=function(){this.x=-this.x;this.y=-this.y;return this};e.prototype.normalize=function(){var e=Math.sqrt(this.x*this.x+this.y*this.y);if(e===0){this.x=1;this.y=0}else{this.x/=e;this.y/=e}return this};e.prototype.scale=function(e,t){t===undefined&&(t=e);this.x*=e;this.y*=t;return this};e.prototype.scaleToMagnitude=function(e){var t=e/this.magnitude();this.x*=t;this.y*=t;return this};e.prototype.setValues=function(t,n){if(t instanceof e){this.x=t.x;this.y=t.y}else{this.x=t;this.y=n}return this};e.prototype.subtract=function(e){this.x-=e.x;this.y-=e.y;return this};e.prototype.toString=function(){return"Vector2D("+this.x+", "+this.y+")"};e.prototype.translate=function(e,t){t===undefined&&(t=e);this.x+=e;this.y+=t;return this};e.tripleProduct=function(e,t,n){var r=e.dotProduct(n),i=t.dotProduct(n);return new Crafty.math.Vector2D(t.x*r-e.x*i,t.y*r-e.y*i)};return e}();Crafty.math.Matrix2D=function(){Matrix2D=function(e,t,n,r,i,s){if(e instanceof Matrix2D){this.a=e.a;this.b=e.b;this.c=e.c;this.d=e.d;this.e=e.e;this.f=e.f}else if(arguments.length===6){this.a=e;this.b=t;this.c=n;this.d=r;this.e=i;this.f=s}else if(arguments.length>0)throw"Unexpected number of arguments for Matrix2D()"};Matrix2D.prototype.a=1;Matrix2D.prototype.b=0;Matrix2D.prototype.c=0;Matrix2D.prototype.d=1;Matrix2D.prototype.e=0;Matrix2D.prototype.f=0;Matrix2D.prototype.apply=function(e){var t=e.x;e.x=t*this.a+e.y*this.c+this.e;e.y=t*this.b+e.y*this.d+this.f;return e};Matrix2D.prototype.clone=function(){return new Matrix2D(this)};Matrix2D.prototype.combine=function(e){var t=this.a;this.a=t*e.a+this.b*e.c;this.b=t*e.b+this.b*e.d;t=this.c;this.c=t*e.a+this.d*e.c;this.d=t*e.b+this.d*e.d;t=this.e;this.e=t*e.a+this.f*e.c+e.e;this.f=t*e.b+this.f*e.d+e.f;return this};Matrix2D.prototype.equals=function(e){return e instanceof Matrix2D&&this.a==e.a&&this.b==e.b&&this.c==e.c&&this.d==e.d&&this.e==e.e&&this.f==e.f};Matrix2D.prototype.determinant=function(){return this.a*this.d-this.b*this.c};Matrix2D.prototype.invert=function(){var e=this.determinant();if(e!==0){var t={a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f};this.a=t.d/e;this.b=-t.b/e;this.c=-t.c/e;this.d=t.a/e;this.e=(t.c*t.f-t.e*t.d)/e;this.f=(t.e*t.b-t.a*t.f)/e}return this};Matrix2D.prototype.isIdentity=function(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.e===0&&this.f===0};Matrix2D.prototype.isInvertible=function(){return this.determinant()!==0};Matrix2D.prototype.preRotate=function(e){var t=Math.cos(e),n=Math.sin(e),r=this.a;this.a=t*r-n*this.b;this.b=n*r+t*this.b;r=this.c;this.c=t*r-n*this.d;this.d=n*r+t*this.d;return this};Matrix2D.prototype.preScale=function(e,t){t===undefined&&(t=e);this.a*=e;this.b*=t;this.c*=e;this.d*=t;return this};Matrix2D.prototype.preTranslate=function(e,t){if(typeof e=="number"){this.e+=e;this.f+=t}else{this.e+=e.x;this.f+=e.y}return this};Matrix2D.prototype.rotate=function(e){var t=Math.cos(e),n=Math.sin(e),r=this.a;this.a=t*r-n*this.b;this.b=n*r+t*this.b;r=this.c;this.c=t*r-n*this.d;this.d=n*r+t*this.d;r=this.e;this.e=t*r-n*this.f;this.f=n*r+t*this.f;return this};Matrix2D.prototype.scale=function(e,t){t===undefined&&(t=e);this.a*=e;this.b*=t;this.c*=e;this.d*=t;this.e*=e;this.f*=t;return this};Matrix2D.prototype.setValues=function(e,t,n,r,i,s){if(e instanceof Matrix2D){this.a=e.a;this.b=e.b;this.c=e.c;this.d=e.d;this.e=e.e;this.f=e.f}else{this.a=e;this.b=t;this.c=n;this.d=r;this.e=i;this.f=s}return this};Matrix2D.prototype.toString=function(){return"Matrix2D(["+this.a+", "+this.c+", "+this.e+"] ["+this.b+", "+this.d+", "+this.f+"] [0, 0, 1])"};Matrix2D.prototype.translate=function(e,t){if(typeof e=="number"){this.e+=this.a*e+this.c*t;this.f+=this.b*e+this.d*t}else{this.e+=this.a*e.x+this.c*e.y;this.f+=this.b*e.x+this.d*e.y}return this};return Matrix2D}();