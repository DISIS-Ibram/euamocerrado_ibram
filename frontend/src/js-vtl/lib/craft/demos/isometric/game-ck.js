//pro tip: see also this work in progress by Hex http://jsfiddle.net/hexaust/HV4TX/
window.onload=function(){Crafty.init();Crafty.sprite(128,"images/sprite.png",{grass:[0,0,1,1],stone:[1,0,1,1]});iso=Crafty.isometric.size(128);var e=0;for(var t=20;t>=0;t--)for(var n=0;n<20;n++){var r=Crafty.math.randomInt(0,1),i=Crafty.e("2D, DOM, "+(r?"stone":"grass")+", Mouse").attr("z",t+1*n+1).areaMap([64,0],[128,32],[128,96],[64,128],[0,96],[0,32]).bind("Click",function(e){console.log(e.button);this.destroy()}).bind("MouseOver",function(){this.has("grass")?this.sprite(0,1,1,1):this.sprite(1,1,1,1)}).bind("MouseOut",function(){this.has("grass")?this.sprite(0,0,1,1):this.sprite(1,0,1,1)});iso.place(t,n,0,i)}Crafty.addEvent(this,Crafty.stage.elem,"mousedown",function(e){function n(e){var n=t.x-e.clientX,r=t.y-e.clientY;t={x:e.clientX,y:e.clientY};Crafty.viewport.x-=n;Crafty.viewport.y-=r}if(e.button>1)return;var t={x:e.clientX,y:e.clientY};Crafty.addEvent(this,Crafty.stage.elem,"mousemove",n);Crafty.addEvent(this,Crafty.stage.elem,"mouseup",function(){Crafty.removeEvent(this,Crafty.stage.elem,"mousemove",n)})})};